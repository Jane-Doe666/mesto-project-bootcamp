(()=>{"use strict";function e(e){"Escape"===e.key&&n(document.querySelector(".popup_opened"))}function t(t){t.classList.add("popup_opened"),document.addEventListener("keydown",e)}function n(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",e)}var o=document.querySelector("#element").content.querySelector(".element"),r=document.querySelector(".popup_picture"),c=r.querySelector(".popup__figcaption"),u=r.querySelector(".popup__figure-img");function i(e,n){var i=o.cloneNode(!0),p=i.querySelector(".element__button-like"),a=i.querySelector(".element__button-delete"),d=i.querySelector(".element__img"),m=i.querySelector(".element__img"),f=i.querySelector(".element__name");return m.src=e,m.alt=n,f.textContent=n,p.addEventListener("click",l),a.addEventListener("click",s),d.addEventListener("click",(function(){!function(e,n){u.src=n,c.textContent=e,u.alt=e,t(r)}(f.textContent,m.src)})),i}function l(e){e.target.closest(".element__like-img").classList.toggle("element__like-img_active")}function s(e){e.target.closest(".element").remove()}function p(e){e.target===e.currentTarget&&n(e.currentTarget)}var a,d=document.querySelector(".popup_info"),m=document.querySelector(".popup_place"),f=document.querySelectorAll(".popup"),_=document.querySelector(".elements__list"),v=document.querySelector(".profile__button-edit"),y=document.querySelector(".profile__name"),S=document.querySelector(".profile__position"),q=document.forms.formUserInfo,k=document.forms.formPlace,b=d.querySelector(".popup__field_name"),g=d.querySelector(".popup__field_profession"),E=document.querySelector(".profile__button-add"),L=m.querySelector(".popup__field_picName"),h=m.querySelector(".popup__field_link");m.querySelector(".popup__button-submit"),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=i(e.link,e.name);_.append(t)})),E.addEventListener("click",(function(){t(m)})),m.addEventListener("submit",(function(e){e.preventDefault();var t=i(h.value,L.value);k.reset(),_.prepend(t),n(m)})),v.addEventListener("click",(function(){t(d),b.value=y.textContent,g.value=S.textContent})),q.addEventListener("submit",(function(e){!function(e){e.preventDefault(),y.textContent=b.value,S.textContent=g.value}(e),n(d)})),f.forEach((function(e){e.addEventListener("mousedown",p),e.querySelector(".popup__close").addEventListener("click",(function(){n(e)}))})),a={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button-submit_disable",inputErrorClass:"popup__field_invalid"},Array.from(document.querySelectorAll(a.formSelector)).forEach((function(e){!function(e,t){Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(n){return n.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?function(e,t){var n="#error-".concat(e.id),o=document.querySelector(n);e.classList.remove(t.inputErrorClass),o.textContent=""}(t,n):function(e,t,n){var o="#error-".concat(e.id),r=document.querySelector(o);e.classList.add(n.inputErrorClass),r.textContent=t}(t,t.validationMessage,n),function(e,t){var n=e.querySelector(t.submitButtonSelector);e.checkValidity()?(n.removeAttribute("disabled"),n.classList.remove(t.inactiveButtonClass)):(n.disabled="true",n.classList.add(t.inactiveButtonClass))}(e,n)}(e,n,t)}))}))}(e,a),e.addEventListener("submit",(function(e){e.preventDefault()}))}))})();